
<style>
    body {
        background-color: #121212;
        color: #f0f0f0;
        font-family: 'Segoe UI', sans-serif;
        margin: 0;
    }
    .market-header {
        display: flex;
        gap: 12px;
        padding: 10px 20px;
    }
    .market-box {
        background-color: #1e1e1e;
        padding: 12px 16px;
        border-radius: 8px;
        flex: 1;
        color: #fff;
        font-size: 0.9rem;
        text-align: center;
    }
    .market-box .index {
        font-weight: bold;
        font-size: 1.1rem;
        color: #00e676;
    }
    .tab-menu {
        display: flex;
        align-items: center;
        padding: 0 20px;
        margin-top: 10px;
        gap: 10px;
    }
    .tab-menu-label {
        color: #ccc;
        margin-right: 10px;
        font-weight: 600;
        font-size: 1.1rem;
        text-shadow: 1px 1px 2px #000;
    }
    .tab-menu button {
        background-color: #2e2e2e;
        border: none;
        padding: 6px 12px;
        border-radius: 6px;
        color: #fff;
        cursor: pointer;
        transition: background-color 0.2s ease-in-out;
    }
    .tab-menu button.active {
        background-color: #e26b5c;
    }
    .tab-menu button:hover {
        background-color: #ff3d00;
    }
    .search-row {
        display: flex;
        align-items: center;
        padding: 10px 20px;
        gap: 12px;
    }
    .search-row input {
        flex: 1;
        padding: 6px 12px;
        border-radius: 6px;
        border: 1px solid #555;
        background-color: #1e1e1e;
        color: #fff;
    }
    .exchange-tabs button {
        background-color: #2e2e2e;
        border: none;
        color: #ccc;
        padding: 6px 14px;
        border-radius: 6px;
    }
    .exchange-tabs button.active, .exchange-tabs button:hover {
        background-color: #e26b5c;
        color: #fff;
    }
    .dashboard-grid {
        display: grid;
        grid-template-columns: 300px 1fr 340px;
        gap: 15px;
        padding: 10px 20px;
    }
    .stock-list, .chart-box, .ai-widget-box {
        background-color: #1e1e1e;
        border-radius: 8px;
        padding: 16px;
        color: #fff;
    }
    .chart-area {
        background-color: #2a2a2a;
        height: 400px;
        border-radius: 6px;
        overflow: hidden;
    }
    .stat-table {
        padding: 0;
        margin-top: 10px;
    }
    .stat-header, .stat-row {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        padding: 6px 12px;
        border-bottom: 1px solid #333;
    }
    .stat-header {
        background-color: #222;
        font-weight: bold;
        text-shadow: 1px 1px 2px #000;
    }
    .stat-row span {
        font-size: 0.8rem;
        opacity: 0.85;
    }
    .arrow-up { color: #00e676; }
    .arrow-down { color: #ff3d00; }
    .ai-widget-box h3 {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 1.1rem;
        margin-bottom: 10px;
    }
    .ai-widget-box .ai-content {
        font-size: 0.95rem;
        line-height: 1.6;
    }
    .ai-highlight-green { color: #00e676; }
    .ai-highlight-red { color: #ff3d00; }
    .ai-highlight-yellow { color: #fdd835; }
</style>

<!-- THÔNG TIN CHỈ SỐ -->
<div class="market-header">
    <div class="market-box"><div>VN30</div><div class="index">1,674.51</div><div>+13.28 | +0.80%</div></div>
    <div class="market-box"><div>VNINDEX</div><div class="index">1,533.48</div><div>+12.46 | +0.82%</div></div>
    <div class="market-box"><div>DOW JONES</div><div class="index">44,940.00</div><div>+41.00 | +0.09%</div></div>
    <div class="market-box"><div>HNX30</div><div class="index">540.74</div><div>+8.06 | +1.51%</div></div>
    <div class="market-box"><div>VN30F1M</div><div class="index">1,669.90</div><div>+14.40 | +0.87%</div></div>
</div>

<!-- MENU DANH MỤC -->
<div class="tab-menu" id="tabMenu">
    <span class="tab-menu-label">Danh mục của bạn:</span>
    <button class="active">Niêm yết</button>
    <button>Ngành</button>
    <button>Phái sinh</button>
    <button>Chứng quyền</button>
    <button>ETF</button>
</div>
<!-- THANH TÌM MÃ VÀ SÀN -->
<div class="search-row">
    <input type="text" placeholder="Tìm mã" />
    <div class="exchange-tabs">
        <button class="active">VN30</button>
        <button>HSX</button>
        <button>HNX</button>
        <button>UPCOM</button>
        <button>Lô lẻ ▼</button>
    </div>
</div>

<div class="dashboard-grid">
    <!-- BÊN TRÁI: THỐNG KÊ BIẾN ĐỘNG -->
    <div class="stock-list">
        <h3 style="text-shadow: 1px 1px 2px #000;">Thống kê biến động</h3>
        <div class="stat-table">
            <div class="stat-header">
                <div>Mã CK</div>
                <div>Giá khớp</div>
                <div>Tổng KL</div>
            </div>
            <div class="stat-row">
                <div>ACB <span style="color: violet">(5.99%)</span></div>
                <div class="arrow-up">23.55 <small>(+0.35)</small></div>
                <div>15,121,600</div>
            </div>
            <div class="stat-row">
                <div>BCM</div>
                <div class="arrow-down">69.60 <small>(-0.30)</small></div>
                <div>521,500</div>
            </div>
            <div class="stat-row">
                <div>BID</div>
                <div class="arrow-up">38.90 <small>(+0.05)</small></div>
                <div>5,145,600</div>
            </div>
            <div class="stat-row">
                <div>BVH</div>
                <div class="arrow-down">52.10 <small>(-0.10)</small></div>
                <div>507,200</div>
            </div>
            <div class="stat-row">
                <div>CTG <span style="color: magenta">(9.99%)</span></div>
                <div class="arrow-down">45.55 <small>(-0.15)</small></div>
                <div>4,430,800</div>
            </div>
            <div class="stat-row">
                <div>FPT</div>
                <div class="arrow-down">110.70 <small>(-0.40)</small></div>
                <div>4,192,900</div>
            </div>
        </div>
    </div>

    <!-- BIỂU ĐỒ GIÁ -->
    <div class="chart-box">
        <h3>Biểu đồ giá</h3>
        <div class="chart-area">
            <div class="tradingview-widget-container">
                <div id="tradingview_chart" style="height: 100%;"></div>
            </div>
        </div>
    </div>

    <!-- AI WIDGET THỊ TRƯỜNG -->
    <div class="ai-widget-box">
        <h3><i class="fa-solid fa-robot"></i> ENSA Trợ lý AI nói gì?</h3>
        <div class="ai-content">
            <p>Vnindex <span class="ai-highlight-green">+1.59%</span> so với tuần trước, giá trị giao dịch <span class="ai-highlight-red">-1.15%</span> và có xu hướng giảm trong ngắn hạn.</p>
            <p>Dòng tiền đang đổ vào các ngành <span class="ai-highlight-green">Ngân hàng</span>, <span class="ai-highlight-yellow">Hàng hóa công nghiệp</span> và rút ra ở ngành <span class="ai-highlight-red">Dịch vụ tiêu dùng</span>.</p>
        </div>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.4/socket.io.min.js"></script>
<script src="https://s3.tradingview.com/tv.js"></script>
<script>
    const socket = io();
    socket.on('connect', () => {
        ['FPT', 'CTG', 'VNM', 'SSI', 'TCB', 'GAS'].forEach(sym => socket.emit('subscribe', { symbol: sym }));
    });
    socket.on('price_update', (data) => {
        const { symbol, price, change } = data;
        const el = document.querySelector(`[data-symbol="${symbol}"]`);
        if (el) el.innerHTML = `<span>${symbol}</span><span>${change.toFixed(2)} (${price.toFixed(2)})</span>`;
    });

    new TradingView.widget({
        container_id: "tradingview_chart",
        autosize: true,
        symbol: "HOSE:SSI",
        interval: "D",
        timezone: "Asia/Ho_Chi_Minh",
        theme: "dark",
        style: "1",
        locale: "vi",
        toolbar_bg: "#1e1e1e",
        enable_publishing: false,
        hide_side_toolbar: false,
        allow_symbol_change: true,
    });

    document.querySelectorAll('#tabMenu button').forEach(button => {
        button.addEventListener('click', function () {
            document.querySelectorAll('#tabMenu button').forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
        });
    });
</script>

